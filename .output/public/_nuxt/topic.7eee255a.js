import{b as C}from"./el-overlay.a9f8551b.js";import{a as D,E as M,c as Y}from"./el-table.a31bbf29.js";import{c as $,E as w}from"./addTopic.85dee60e.js";import{r as y,$ as k,l as r,m as N,q as n,s as o,A as m,k as s,v as p,ag as V,ah as A,t as _,aw as F,G as g,ax as H}from"./entry.68178e43.js";import"./el-tooltip.4ed993c7.js";import"./el-popper.f81160bc.js";import"./el-scrollbar.e492f9e9.js";import{_ as I}from"./_plugin-vue_export-helper.c27b6911.js";import{E as L}from"./index.e1ac7418.js";import"./index.2c8df682.js";import"./index.38034195.js";import"./_commonjsHelpers.725317a4.js";import"./debounce.b524432a.js";import"./el-form.3f8bc4ed.js";import"./index.1ad8d987.js";import"./vnode.a9c3e3aa.js";/* empty css                */import"./upload.c8fe3ea7.js";import"./aria.bc8e8b0f.js";const q={class:"topic-list-page"},G={class:"actions"},S={key:0},W={key:3},j={__name:"topic",setup(z){let d=y();const v=[{label:"主题",key:"name"},{label:"封面",key:"cover"},{label:"创建时间",key:"createTime"}];let u=y([]);c();function c(){k.get("/api/topic").then(t=>{u.value=t==null?void 0:t.data})}function h(t,i){d.value.open(t)}function E(t,i){L.confirm("是否删除","Warning",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(()=>{k.delete("/api/admin/topic/"+t._id).then(l=>{H({message:"删除成功",type:"success"}),c()})})}return(t,i)=>{const l=C,b=M,x=w,f=Y,T=D;return s(),r("div",q,[N("div",G,[n(m($),{ref_key:"addDialogEl",ref:d,onConfirm:c},{default:o(()=>[n(l,{class:"btn",type:"primary",onClick:i[0]||(i[0]=e=>t.addFormDialog.show=!0)},{default:o(()=>[p("添加")]),_:1})]),_:1},512)]),n(T,{data:m(u),stripe:""},{default:o(()=>[(s(),r(V,null,A(v,e=>n(f,{prop:e.key,label:e.label},{default:o(({row:a})=>[e.key=="createTime"?(s(),r("span",S,_(m(F)(a.createTime).format("YYYY-MM-DD HH:mm")),1)):e.key=="name"?(s(),g(b,{key:1},{default:o(()=>[p(_(a.name),1)]),_:2},1024)):e.key=="cover"?(s(),g(x,{key:2,style:{width:"30px"},"preview-teleported":!0,src:a.cover,"preview-src-list":[a.cover]},null,8,["src","preview-src-list"])):(s(),r("span",W,_(a[e.key]),1))]),_:2},1032,["prop","label"])),64)),n(f,null,{default:o(({row:e,$index:a})=>[n(l,{type:"danger",text:"",onClick:B=>E(e,a)},{default:o(()=>[p("删除")]),_:2},1032,["onClick"]),n(l,{type:"primary",text:"",onClick:B=>h(e,a)},{default:o(()=>[p("编辑")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])}}},ce=I(j,[["__scopeId","data-v-555aa7e6"]]);export{ce as default};
