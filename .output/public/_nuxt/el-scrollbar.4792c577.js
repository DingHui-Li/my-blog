import{b as Se,j as Ee,U as J,q as j,m as V,c as k,S as F,e as Te}from"./debounce.3d1281f4.js";import{bC as $,aZ as G,bF as Ae,aU as Pe,aV as ee,A as Q,_ as Z,d as U,H as Le,M as me,r as w,c as H,b as Re,bg as K,aP as te,k as x,D as X,s as pe,Q as Oe,m as Y,T as B,F as E,W as q,R as He,ac as Ce,a0 as ge,l as he,q as ae,ad as ze,al as xe,a2 as z,bm as ne,K as se,V as Be,P as re,a9 as Me,N as Ne,o as De,ba as $e,S as Ie,E as Ue,af as Fe,a4 as We,aj as Ge,bd as Ke}from"./entry.c16f7e93.js";import{t as Xe}from"./index.66d13a70.js";var le=$?$.isConcatSpreadable:void 0;function Ye(e){return G(e)||Se(e)||!!(le&&e&&e[le])}function ye(e,t,a,n,r){var s=-1,l=e.length;for(a||(a=Ye),r||(r=[]);++s<l;){var c=e[s];t>0&&a(c)?t>1?ye(c,t-1,a,n,r):Ee(r,c):n||(r[r.length]=c)}return r}function Ut(e){var t=e==null?0:e.length;return t?ye(e,1):[]}var qe="__lodash_hash_undefined__";function Qe(e){return this.__data__.set(e,qe),this}function Ze(e){return this.__data__.has(e)}function I(e){var t=-1,a=e==null?0:e.length;for(this.__data__=new Ae;++t<a;)this.add(e[t])}I.prototype.add=I.prototype.push=Qe;I.prototype.has=Ze;function Je(e,t){for(var a=-1,n=e==null?0:e.length;++a<n;)if(t(e[a],a,e))return!0;return!1}function je(e,t){return e.has(t)}var Ve=1,ke=2;function be(e,t,a,n,r,s){var l=a&Ve,c=e.length,o=t.length;if(c!=o&&!(l&&o>c))return!1;var v=s.get(e),p=s.get(t);if(v&&p)return v==t&&p==e;var u=-1,f=!0,g=a&ke?new I:void 0;for(s.set(e,t),s.set(t,e);++u<c;){var m=e[u],y=t[u];if(n)var _=l?n(y,m,u,t,e,s):n(m,y,u,e,t,s);if(_!==void 0){if(_)continue;f=!1;break}if(g){if(!Je(t,function(S,b){if(!je(g,b)&&(m===S||r(m,S,a,n,s)))return g.push(b)})){f=!1;break}}else if(!(m===y||r(m,y,a,n,s))){f=!1;break}}return s.delete(e),s.delete(t),f}function et(e){var t=-1,a=Array(e.size);return e.forEach(function(n,r){a[++t]=[r,n]}),a}function tt(e){var t=-1,a=Array(e.size);return e.forEach(function(n){a[++t]=n}),a}var at=1,nt=2,st="[object Boolean]",rt="[object Date]",lt="[object Error]",ot="[object Map]",it="[object Number]",ut="[object RegExp]",ct="[object Set]",ft="[object String]",vt="[object Symbol]",dt="[object ArrayBuffer]",mt="[object DataView]",oe=$?$.prototype:void 0,W=oe?oe.valueOf:void 0;function pt(e,t,a,n,r,s,l){switch(a){case mt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case dt:return!(e.byteLength!=t.byteLength||!s(new J(e),new J(t)));case st:case rt:case it:return Pe(+e,+t);case lt:return e.name==t.name&&e.message==t.message;case ut:case ft:return e==t+"";case ot:var c=et;case ct:var o=n&at;if(c||(c=tt),e.size!=t.size&&!o)return!1;var v=l.get(e);if(v)return v==t;n|=nt,l.set(e,t);var p=be(c(e),c(t),n,r,s,l);return l.delete(e),p;case vt:if(W)return W.call(e)==W.call(t)}return!1}var gt=1,ht=Object.prototype,yt=ht.hasOwnProperty;function bt(e,t,a,n,r,s){var l=a&gt,c=j(e),o=c.length,v=j(t),p=v.length;if(o!=p&&!l)return!1;for(var u=o;u--;){var f=c[u];if(!(l?f in t:yt.call(t,f)))return!1}var g=s.get(e),m=s.get(t);if(g&&m)return g==t&&m==e;var y=!0;s.set(e,t),s.set(t,e);for(var _=l;++u<o;){f=c[u];var S=e[f],b=t[f];if(n)var R=l?n(b,S,f,t,e,s):n(S,b,f,e,t,s);if(!(R===void 0?S===b||r(S,b,a,n,s):R)){y=!1;break}_||(_=f=="constructor")}if(y&&!_){var A=e.constructor,T=t.constructor;A!=T&&"constructor"in e&&"constructor"in t&&!(typeof A=="function"&&A instanceof A&&typeof T=="function"&&T instanceof T)&&(y=!1)}return s.delete(e),s.delete(t),y}var wt=1,ie="[object Arguments]",ue="[object Array]",D="[object Object]",_t=Object.prototype,ce=_t.hasOwnProperty;function St(e,t,a,n,r,s){var l=G(e),c=G(t),o=l?ue:V(e),v=c?ue:V(t);o=o==ie?D:o,v=v==ie?D:v;var p=o==D,u=v==D,f=o==v;if(f&&k(e)){if(!k(t))return!1;l=!0,p=!1}if(f&&!p)return s||(s=new F),l||Te(e)?be(e,t,a,n,r,s):pt(e,t,o,a,n,r,s);if(!(a&wt)){var g=p&&ce.call(e,"__wrapped__"),m=u&&ce.call(t,"__wrapped__");if(g||m){var y=g?e.value():e,_=m?t.value():t;return s||(s=new F),r(y,_,a,n,s)}}return f?(s||(s=new F),bt(e,t,a,n,r,s)):!1}function we(e,t,a,n,r){return e===t?!0:e==null||t==null||!ee(e)&&!ee(t)?e!==e&&t!==t:St(e,t,a,n,we,r)}function Ft(e,t){return we(e,t)}const O=4,Et={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},Tt=({move:e,size:t,bar:a})=>({[a.size]:t,transform:`translate${a.axis}(${e}%)`}),_e=Symbol("scrollbarContextKey"),At=Q({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),Pt="Thumb",Lt=U({__name:"thumb",props:At,setup(e){const t=e,a=Le(_e),n=me("scrollbar");a||Xe(Pt,"can not inject scrollbar context");const r=w(),s=w(),l=w({}),c=w(!1);let o=!1,v=!1,p=ge?document.onselectstart:null;const u=H(()=>Et[t.vertical?"vertical":"horizontal"]),f=H(()=>Tt({size:t.size,move:t.move,bar:u.value})),g=H(()=>r.value[u.value.offset]**2/a.wrapElement[u.value.scrollSize]/t.ratio/s.value[u.value.offset]),m=d=>{var i;if(d.stopPropagation(),d.ctrlKey||[1,2].includes(d.button))return;(i=window.getSelection())==null||i.removeAllRanges(),_(d);const h=d.currentTarget;h&&(l.value[u.value.axis]=h[u.value.offset]-(d[u.value.client]-h.getBoundingClientRect()[u.value.direction]))},y=d=>{if(!s.value||!r.value||!a.wrapElement)return;const i=Math.abs(d.target.getBoundingClientRect()[u.value.direction]-d[u.value.client]),h=s.value[u.value.offset]/2,L=(i-h)*100*g.value/r.value[u.value.offset];a.wrapElement[u.value.scroll]=L*a.wrapElement[u.value.scrollSize]/100},_=d=>{d.stopImmediatePropagation(),o=!0,document.addEventListener("mousemove",S),document.addEventListener("mouseup",b),p=document.onselectstart,document.onselectstart=()=>!1},S=d=>{if(!r.value||!s.value||o===!1)return;const i=l.value[u.value.axis];if(!i)return;const h=(r.value.getBoundingClientRect()[u.value.direction]-d[u.value.client])*-1,L=s.value[u.value.offset]-i,C=(h-L)*100*g.value/r.value[u.value.offset];a.wrapElement[u.value.scroll]=C*a.wrapElement[u.value.scrollSize]/100},b=()=>{o=!1,l.value[u.value.axis]=0,document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",b),T(),v&&(c.value=!1)},R=()=>{v=!1,c.value=!!t.size},A=()=>{v=!0,c.value=o};Re(()=>{T(),document.removeEventListener("mouseup",b)});const T=()=>{document.onselectstart!==p&&(document.onselectstart=p)};return K(te(a,"scrollbarElement"),"mousemove",R),K(te(a,"scrollbarElement"),"mouseleave",A),(d,i)=>(x(),X(Ce,{name:E(n).b("fade"),persisted:""},{default:pe(()=>[Oe(Y("div",{ref_key:"instance",ref:r,class:B([E(n).e("bar"),E(n).is(E(u).key)]),onMousedown:y},[Y("div",{ref_key:"thumb",ref:s,class:B(E(n).e("thumb")),style:q(E(f)),onMousedown:m},null,38)],34),[[He,d.always||c.value]])]),_:1},8,["name"]))}});var fe=Z(Lt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const Rt=Q({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),Ot=U({__name:"bar",props:Rt,setup(e,{expose:t}){const a=e,n=w(0),r=w(0);return t({handleScroll:l=>{if(l){const c=l.offsetHeight-O,o=l.offsetWidth-O;r.value=l.scrollTop*100/c*a.ratioY,n.value=l.scrollLeft*100/o*a.ratioX}}}),(l,c)=>(x(),he(ze,null,[ae(fe,{move:n.value,ratio:l.ratioX,size:l.width,always:l.always},null,8,["move","ratio","size","always"]),ae(fe,{move:r.value,ratio:l.ratioY,size:l.height,vertical:"",always:l.always},null,8,["move","ratio","size","always"])],64))}});var Ht=Z(Ot,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const Ct=Q({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:xe([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),zt={scroll:({scrollTop:e,scrollLeft:t})=>[e,t].every(z)},xt="ElScrollbar",Bt=U({name:xt}),Mt=U({...Bt,props:Ct,emits:zt,setup(e,{expose:t,emit:a}){const n=e,r=me("scrollbar");let s,l;const c=w(),o=w(),v=w(),p=w("0"),u=w("0"),f=w(),g=w(1),m=w(1),y=H(()=>{const i={};return n.height&&(i.height=ne(n.height)),n.maxHeight&&(i.maxHeight=ne(n.maxHeight)),[n.wrapStyle,i]}),_=H(()=>[n.wrapClass,r.e("wrap"),{[r.em("wrap","hidden-default")]:!n.native}]),S=H(()=>[r.e("view"),n.viewClass]),b=()=>{var i;o.value&&((i=f.value)==null||i.handleScroll(o.value),a("scroll",{scrollTop:o.value.scrollTop,scrollLeft:o.value.scrollLeft}))};function R(i,h){We(i)?o.value.scrollTo(i):z(i)&&z(h)&&o.value.scrollTo(i,h)}const A=i=>{z(i)&&(o.value.scrollTop=i)},T=i=>{z(i)&&(o.value.scrollLeft=i)},d=()=>{if(!o.value)return;const i=o.value.offsetHeight-O,h=o.value.offsetWidth-O,L=i**2/o.value.scrollHeight,C=h**2/o.value.scrollWidth,M=Math.max(L,n.minSize),N=Math.max(C,n.minSize);g.value=L/(i-L)/(M/(i-M)),m.value=C/(h-C)/(N/(h-N)),u.value=M+O<i?`${M}px`:"",p.value=N+O<h?`${N}px`:""};return se(()=>n.noresize,i=>{i?(s==null||s(),l==null||l()):({stop:s}=Be(v,d),l=K("resize",d))},{immediate:!0}),se(()=>[n.maxHeight,n.height],()=>{n.native||re(()=>{var i;d(),o.value&&((i=f.value)==null||i.handleScroll(o.value))})}),Me(_e,Ne({scrollbarElement:c,wrapElement:o})),De(()=>{n.native||re(()=>{d()})}),$e(()=>d()),t({wrapRef:o,update:d,scrollTo:R,setScrollTop:A,setScrollLeft:T,handleScroll:b}),(i,h)=>(x(),he("div",{ref_key:"scrollbarRef",ref:c,class:B(E(r).b())},[Y("div",{ref_key:"wrapRef",ref:o,class:B(E(_)),style:q(E(y)),onScroll:b},[(x(),X(Ue(i.tag),{ref_key:"resizeRef",ref:v,class:B(E(S)),style:q(i.viewStyle)},{default:pe(()=>[Ie(i.$slots,"default")]),_:3},8,["class","style"]))],38),i.native?Fe("v-if",!0):(x(),X(Ht,{key:0,ref_key:"barRef",ref:f,height:u.value,width:p.value,always:i.always,"ratio-x":m.value,"ratio-y":g.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Nt=Z(Mt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const Wt=Ge(Nt),P=new Map;let ve;ge&&(document.addEventListener("mousedown",e=>ve=e),document.addEventListener("mouseup",e=>{for(const t of P.values())for(const{documentHandler:a}of t)a(e,ve)}));function de(e,t){let a=[];return Array.isArray(t.arg)?a=t.arg:Ke(t.arg)&&a.push(t.arg),function(n,r){const s=t.instance.popperRef,l=n.target,c=r==null?void 0:r.target,o=!t||!t.instance,v=!l||!c,p=e.contains(l)||e.contains(c),u=e===l,f=a.length&&a.some(m=>m==null?void 0:m.contains(l))||a.length&&a.includes(c),g=s&&(s.contains(l)||s.contains(c));o||v||p||u||f||g||t.value(n,r)}}const Gt={beforeMount(e,t){P.has(e)||P.set(e,[]),P.get(e).push({documentHandler:de(e,t),bindingFn:t.value})},updated(e,t){P.has(e)||P.set(e,[]);const a=P.get(e),n=a.findIndex(s=>s.bindingFn===t.oldValue),r={documentHandler:de(e,t),bindingFn:t.value};n>=0?a.splice(n,1,r):a.push(r)},unmounted(e){P.delete(e)}};export{Gt as C,Wt as E,ye as a,we as b,Ut as f,Ft as i};
