import{a0 as d,aL as L,o as z,ao as D,b as $,bm as x,b5 as A,M as P,bT as U,aN as T,K as V,bc as _,bU as K,be as j,bV as p,A as q,al as S,d as F,q as G,S as k,e as J}from"./entry.c16f7e93.js";import{t as Q}from"./index.66d13a70.js";import{P as h}from"./vnode.1ba59ce8.js";const R=(t,o)=>{if(!d)return!1;const e={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(o)],n=L(t,e);return["scroll","auto","overlay"].some(s=>n.includes(s))},re=(t,o)=>{if(!d)return;let e=t;for(;e;){if([window,document,document.documentElement].includes(e))return window;if(R(e,o))return e;e=e.parentNode}return e};let f;const Z=t=>{var o;if(!d)return 0;if(f!==void 0)return f;const e=document.createElement("div");e.className=`${t}-scrollbar__wrap`,e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);const n=e.offsetWidth;e.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",e.appendChild(s);const a=s.offsetWidth;return(o=e.parentNode)==null||o.removeChild(e),f=n-a,f};function ie(t,o){if(!d)return;if(!o){t.scrollTop=0;return}const e=[];let n=o.offsetParent;for(;n!==null&&t!==n&&t.contains(n);)e.push(n),n=n.offsetParent;const s=o.offsetTop+e.reduce((r,i)=>r+i.offsetTop,0),a=s+o.offsetHeight,l=t.scrollTop,c=l+t.clientHeight;s<l?t.scrollTop=s:a>c&&(t.scrollTop=a-t.clientHeight)}const ue=(t,o,e)=>{let n={offsetX:0,offsetY:0};const s=c=>{const r=c.clientX,i=c.clientY,{offsetX:u,offsetY:v}=n,m=t.value.getBoundingClientRect(),y=m.left,w=m.top,Y=m.width,H=m.height,O=document.documentElement.clientWidth,W=document.documentElement.clientHeight,B=-y+u,N=-w+v,X=O-y-Y+u,I=W-w-H+v,b=M=>{const C=Math.min(Math.max(u+M.clientX-r,B),X),E=Math.min(Math.max(v+M.clientY-i,N),I);n={offsetX:C,offsetY:E},t.value.style.transform=`translate(${x(C)}, ${x(E)})`},g=()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",g)};document.addEventListener("mousemove",b),document.addEventListener("mouseup",g)},a=()=>{o.value&&t.value&&o.value.addEventListener("mousedown",s)},l=()=>{o.value&&t.value&&o.value.removeEventListener("mousedown",s)};z(()=>{D(()=>{e.value?a():l()})}),$(()=>{l()})},de=(t,o={})=>{A(t)||Q("[useLockscreen]","You need to pass a ref param to this function");const e=o.ns||P("popup"),n=U(()=>e.bm("parent","hidden"));if(!d||T(document.body,n.value))return;let s=0,a=!1,l="0";const c=()=>{setTimeout(()=>{j(document==null?void 0:document.body,n.value),a&&document&&(document.body.style.width=l)},200)};V(t,r=>{if(!r){c();return}a=!T(document.body,n.value),a&&(l=document.body.style.width),s=Z(e.namespace.value);const i=document.documentElement.clientHeight<document.body.scrollHeight,u=L(document.body,"overflowY");s>0&&(i||u==="scroll")&&a&&(document.body.style.width=`calc(100% - ${s}px)`),_(document.body,n.value)}),K(()=>c())},ee=t=>{if(!t)return{onClick:p,onMousedown:p,onMouseup:p};let o=!1,e=!1;return{onClick:l=>{o&&e&&t(l),o=e=!1},onMousedown:l=>{o=l.target===l.currentTarget},onMouseup:l=>{e=l.target===l.currentTarget}}},te=q({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:S([String,Array,Object])},zIndex:{type:S([String,Number])}}),oe={click:t=>t instanceof MouseEvent},ne="overlay";var se=F({name:"ElOverlay",props:te,emits:oe,setup(t,{slots:o,emit:e}){const n=P(ne),s=r=>{e("click",r)},{onClick:a,onMousedown:l,onMouseup:c}=ee(t.customMaskEvent?void 0:s);return()=>t.mask?G("div",{class:[n.b(),t.overlayClass],style:{zIndex:t.zIndex},onClick:a,onMousedown:l,onMouseup:c},[k(o,"default")],h.STYLE|h.CLASS|h.PROPS,["onClick","onMouseup","onMousedown"]):J("div",{class:t.overlayClass,style:{zIndex:t.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[k(o,"default")])}});const me=se;export{me as E,de as a,ee as b,re as g,ie as s,ue as u};
