import{a3 as d,aM as L,o as z,aq as D,b as U,bm as x,b5 as $,O,bT as V,aO as T,M as _,bc as q,bU as A,be as j,bV as p,D as F,an as S,d as K,q as G,U as k,e as J}from"./entry.68178e43.js";import{t as Q}from"./index.2c8df682.js";import{P as h}from"./vnode.a9c3e3aa.js";const R=(t,o)=>{if(!d)return!1;const e={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(o)],n=L(t,e);return["scroll","auto","overlay"].some(s=>n.includes(s))},re=(t,o)=>{if(!d)return;let e=t;for(;e;){if([window,document,document.documentElement].includes(e))return window;if(R(e,o))return e;e=e.parentNode}return e};let f;const Z=t=>{var o;if(!d)return 0;if(f!==void 0)return f;const e=document.createElement("div");e.className=`${t}-scrollbar__wrap`,e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);const n=e.offsetWidth;e.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",e.appendChild(s);const a=s.offsetWidth;return(o=e.parentNode)==null||o.removeChild(e),f=n-a,f};function ie(t,o){if(!d)return;if(!o){t.scrollTop=0;return}const e=[];let n=o.offsetParent;for(;n!==null&&t!==n&&t.contains(n);)e.push(n),n=n.offsetParent;const s=o.offsetTop+e.reduce((r,i)=>r+i.offsetTop,0),a=s+o.offsetHeight,l=t.scrollTop,c=l+t.clientHeight;s<l?t.scrollTop=s:a>c&&(t.scrollTop=a-t.clientHeight)}const ue=(t,o,e)=>{let n={offsetX:0,offsetY:0};const s=c=>{const r=c.clientX,i=c.clientY,{offsetX:u,offsetY:v}=n,m=t.value.getBoundingClientRect(),y=m.left,w=m.top,P=m.width,Y=m.height,H=document.documentElement.clientWidth,W=document.documentElement.clientHeight,B=-y+u,N=-w+v,X=H-y-P+u,I=W-w-Y+v,b=M=>{const C=Math.min(Math.max(u+M.clientX-r,B),X),E=Math.min(Math.max(v+M.clientY-i,N),I);n={offsetX:C,offsetY:E},t.value.style.transform=`translate(${x(C)}, ${x(E)})`},g=()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",g)};document.addEventListener("mousemove",b),document.addEventListener("mouseup",g)},a=()=>{o.value&&t.value&&o.value.addEventListener("mousedown",s)},l=()=>{o.value&&t.value&&o.value.removeEventListener("mousedown",s)};z(()=>{D(()=>{e.value?a():l()})}),U(()=>{l()})},de=(t,o={})=>{$(t)||Q("[useLockscreen]","You need to pass a ref param to this function");const e=o.ns||O("popup"),n=V(()=>e.bm("parent","hidden"));if(!d||T(document.body,n.value))return;let s=0,a=!1,l="0";const c=()=>{setTimeout(()=>{j(document==null?void 0:document.body,n.value),a&&document&&(document.body.style.width=l)},200)};_(t,r=>{if(!r){c();return}a=!T(document.body,n.value),a&&(l=document.body.style.width),s=Z(e.namespace.value);const i=document.documentElement.clientHeight<document.body.scrollHeight,u=L(document.body,"overflowY");s>0&&(i||u==="scroll")&&a&&(document.body.style.width=`calc(100% - ${s}px)`),q(document.body,n.value)}),A(()=>c())},ee=t=>{if(!t)return{onClick:p,onMousedown:p,onMouseup:p};let o=!1,e=!1;return{onClick:l=>{o&&e&&t(l),o=e=!1},onMousedown:l=>{o=l.target===l.currentTarget},onMouseup:l=>{e=l.target===l.currentTarget}}},te=F({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:S([String,Array,Object])},zIndex:{type:S([String,Number])}}),oe={click:t=>t instanceof MouseEvent},ne="overlay";var se=K({name:"ElOverlay",props:te,emits:oe,setup(t,{slots:o,emit:e}){const n=O(ne),s=r=>{e("click",r)},{onClick:a,onMousedown:l,onMouseup:c}=ee(t.customMaskEvent?void 0:s);return()=>t.mask?G("div",{class:[n.b(),t.overlayClass],style:{zIndex:t.zIndex},onClick:a,onMousedown:l,onMouseup:c},[k(o,"default")],h.STYLE|h.CLASS|h.PROPS,["onClick","onMouseup","onMousedown"]):J("div",{class:t.overlayClass,style:{zIndex:t.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[k(o,"default")])}});const me=se;export{me as E,de as a,ee as b,re as g,ie as s,ue as u};
