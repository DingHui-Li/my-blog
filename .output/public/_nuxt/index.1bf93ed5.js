import{a4 as d,aP as L,o as z,ar as D,b as V,bo as x,aF as $,P,bV as F,aR as T,B as _,be as A,bW as U,bg as j,bX as p,F as q,ao as S,d as K,q as R,V as k,e as G}from"./entry.3d29806f.js";import{t as J}from"./index.df728e16.js";import{P as h}from"./vnode.54aebfc6.js";const Q=(t,o)=>{if(!d)return!1;const e={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(o)],n=L(t,e);return["scroll","auto","overlay"].some(s=>n.includes(s))},re=(t,o)=>{if(!d)return;let e=t;for(;e;){if([window,document,document.documentElement].includes(e))return window;if(Q(e,o))return e;e=e.parentNode}return e};let f;const Z=t=>{var o;if(!d)return 0;if(f!==void 0)return f;const e=document.createElement("div");e.className=`${t}-scrollbar__wrap`,e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);const n=e.offsetWidth;e.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",e.appendChild(s);const a=s.offsetWidth;return(o=e.parentNode)==null||o.removeChild(e),f=n-a,f};function ie(t,o){if(!d)return;if(!o){t.scrollTop=0;return}const e=[];let n=o.offsetParent;for(;n!==null&&t!==n&&t.contains(n);)e.push(n),n=n.offsetParent;const s=o.offsetTop+e.reduce((r,i)=>r+i.offsetTop,0),a=s+o.offsetHeight,l=t.scrollTop,c=l+t.clientHeight;s<l?t.scrollTop=s:a>c&&(t.scrollTop=a-t.clientHeight)}const ue=(t,o,e)=>{let n={offsetX:0,offsetY:0};const s=c=>{const r=c.clientX,i=c.clientY,{offsetX:u,offsetY:v}=n,m=t.value.getBoundingClientRect(),y=m.left,w=m.top,W=m.width,Y=m.height,B=document.documentElement.clientWidth,H=document.documentElement.clientHeight,O=-y+u,N=-w+v,X=B-y-W+u,I=H-w-Y+v,b=C=>{const E=Math.min(Math.max(u+C.clientX-r,O),X),M=Math.min(Math.max(v+C.clientY-i,N),I);n={offsetX:E,offsetY:M},t.value.style.transform=`translate(${x(E)}, ${x(M)})`},g=()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",g)};document.addEventListener("mousemove",b),document.addEventListener("mouseup",g)},a=()=>{o.value&&t.value&&o.value.addEventListener("mousedown",s)},l=()=>{o.value&&t.value&&o.value.removeEventListener("mousedown",s)};z(()=>{D(()=>{e.value?a():l()})}),V(()=>{l()})},de=(t,o={})=>{$(t)||J("[useLockscreen]","You need to pass a ref param to this function");const e=o.ns||P("popup"),n=F(()=>e.bm("parent","hidden"));if(!d||T(document.body,n.value))return;let s=0,a=!1,l="0";const c=()=>{setTimeout(()=>{j(document==null?void 0:document.body,n.value),a&&document&&(document.body.style.width=l)},200)};_(t,r=>{if(!r){c();return}a=!T(document.body,n.value),a&&(l=document.body.style.width),s=Z(e.namespace.value);const i=document.documentElement.clientHeight<document.body.scrollHeight,u=L(document.body,"overflowY");s>0&&(i||u==="scroll")&&a&&(document.body.style.width=`calc(100% - ${s}px)`),A(document.body,n.value)}),U(()=>c())},ee=t=>{if(!t)return{onClick:p,onMousedown:p,onMouseup:p};let o=!1,e=!1;return{onClick:l=>{o&&e&&t(l),o=e=!1},onMousedown:l=>{o=l.target===l.currentTarget},onMouseup:l=>{e=l.target===l.currentTarget}}},te=q({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:S([String,Array,Object])},zIndex:{type:S([String,Number])}}),oe={click:t=>t instanceof MouseEvent},ne="overlay";var se=K({name:"ElOverlay",props:te,emits:oe,setup(t,{slots:o,emit:e}){const n=P(ne),s=r=>{e("click",r)},{onClick:a,onMousedown:l,onMouseup:c}=ee(t.customMaskEvent?void 0:s);return()=>t.mask?R("div",{class:[n.b(),t.overlayClass],style:{zIndex:t.zIndex},onClick:a,onMousedown:l,onMouseup:c},[k(o,"default")],h.STYLE|h.CLASS|h.PROPS,["onClick","onMouseup","onMousedown"]):G("div",{class:t.overlayClass,style:{zIndex:t.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[k(o,"default")])}});const me=se;export{me as E,de as a,ee as b,re as g,ie as s,ue as u};
