import{b as B}from"./el-overlay.3a158f75.js";import{a as D,E as M,c as Y}from"./el-table.b088b3df.js";import{c as $,E as I}from"./addTopic.0df72023.js";import{r as y,$ as k,l as r,m as N,q as n,s as o,C as m,k as s,v as p,ah as V,ai as w,t as _,ax as F,I as g,ay as H}from"./entry.3d29806f.js";import"./el-tooltip.4ed993c7.js";import"./el-popper.fe8c1d69.js";import"./el-scrollbar.489114b6.js";import{_ as L}from"./_plugin-vue_export-helper.c27b6911.js";import{E as q}from"./index.0c464fb0.js";import"./index.df728e16.js";import"./index.38034195.js";import"./_commonjsHelpers.725317a4.js";import"./debounce.1aac7b3c.js";import"./el-form.41378309.js";import"./index.1bf93ed5.js";import"./vnode.54aebfc6.js";/* empty css                */import"./upload.aee39f4c.js";import"./aria.bc8e8b0f.js";const A={class:"topic-list-page"},S={class:"actions"},W={key:0},j={key:3},z={__name:"topic",setup(G){let d=y();const v=[{label:"主题",key:"name"},{label:"封面",key:"cover"},{label:"创建时间",key:"createTime"}];let u=y([]);c();function c(){k.get("/api/topic").then(t=>{u.value=t==null?void 0:t.data})}function b(t,i){d.value.open(t)}function h(t,i){q.confirm("是否删除","Warning",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(()=>{k.delete("/api/admin/topic/"+t._id).then(l=>{H({message:"删除成功",type:"success"}),c()})})}return(t,i)=>{const l=B,E=M,x=I,f=Y,T=D;return s(),r("div",A,[N("div",S,[n(m($),{ref_key:"addDialogEl",ref:d,onConfirm:c},{default:o(()=>[n(l,{class:"btn",type:"primary",onClick:i[0]||(i[0]=e=>t.addFormDialog.show=!0)},{default:o(()=>[p("添加")]),_:1})]),_:1},512)]),n(T,{data:m(u),stripe:""},{default:o(()=>[(s(),r(V,null,w(v,e=>n(f,{prop:e.key,label:e.label},{default:o(({row:a})=>[e.key=="createTime"?(s(),r("span",W,_(m(F)(a.createTime).format("YYYY-MM-DD HH:mm")),1)):e.key=="name"?(s(),g(E,{key:1},{default:o(()=>[p(_(a.name),1)]),_:2},1024)):e.key=="cover"?(s(),g(x,{key:2,style:{width:"30px"},"preview-teleported":!0,src:a.cover,"preview-src-list":[a.cover]},null,8,["src","preview-src-list"])):(s(),r("span",j,_(a[e.key]),1))]),_:2},1032,["prop","label"])),64)),n(f,null,{default:o(({row:e,$index:a})=>[n(l,{type:"danger",text:"",onClick:C=>h(e,a)},{default:o(()=>[p("删除")]),_:2},1032,["onClick"]),n(l,{type:"primary",text:"",onClick:C=>b(e,a)},{default:o(()=>[p("编辑")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])}}},ce=L(z,[["__scopeId","data-v-b52972e0"]]);export{ce as default};
