import{d as h,r as x,a as k,z as y,A as c,c as T,k as l,l as r,m as t,C as o,D as C,q as d,s as b,aE as B,t as w,T as E,ak as V,aF as A,W as N,$ as R,e as a,K as S}from"./entry.3d29806f.js";/* empty css                */import"./el-overlay.3a158f75.js";import{E as p}from"./index.0c464fb0.js";import{_ as z}from"./_plugin-vue_export-helper.c27b6911.js";import"./index.df728e16.js";import"./index.1bf93ed5.js";import"./vnode.54aebfc6.js";import"./aria.bc8e8b0f.js";const D={class:"login-page"},M={class:"card"},F=["src"],I={class:"content"},Q={class:"title"},$={class:"input-box"},q=h({__name:"login",setup(G){const e=x(""),_=k(),{globalSetting:u}=y(c()),n=T(()=>u.value.website||{});function m(){p.prompt("请输入后台配置的密钥","绑定",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(({value:i})=>{i&&R.get("/api/getTOTPQR",{secret:i}).then(s=>{p({title:"绑定动态验证码",message:a("div",null,[a("div",null,"使用Google Authenticator,Microsoft Authenticator等2FA客户端扫描二维码"),s.data?a("img",{style:"width:200px;height:auto;",src:s.data},"VNode"):a("div",{style:"color:red;margin-top:30px"},"获取二维码失败")])})})})}function g(){e.value&&c().login({code:e.value}).then(()=>{console.log("登录成功"),_.replace("/admin")})}return(i,s)=>{const v=S;return l(),r("div",D,[t("div",M,[o(n).cover?(l(),r("img",{key:0,class:"cover",src:o(n).cover,alt:""},null,8,F)):C("",!0),t("div",I,[d(v,{class:"icon-key",size:"20",onClick:m},{default:b(()=>[d(o(B))]),_:1}),t("div",Q,w(o(n).name),1),t("div",$,[E(t("input",{class:"input",placeholder:"请输入动态验证码","onUpdate:modelValue":s[0]||(s[0]=f=>A(e)?e.value=f:null)},null,512),[[V,o(e)]])]),t("div",{class:N(["btn",o(e).length!=6&&"disabled"]),onClick:g},"验证",2)])])])}}});const X=z(q,[["__scopeId","data-v-ee9888cc"]]);export{X as default};
